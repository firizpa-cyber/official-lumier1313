# Отчет о диагностике проблем с медиа-ресурсами

## 1. Статус исправлений

### ✅ Проблема с HLS потоком (Решено)
**Проблема:** Ошибка загрузки HLS.js (`http://ant-tv.ddns.net/.../master.m3u8`).
**Причина:** Библиотека `hls.js` загружалась с внешнего CDN (`cdn.jsdelivr.net`), который был недоступен или блокировался, либо скрипт не успевал инициализироваться.
**Исправление:** 
1. Установлена библиотека `hls.js` локально через npm: `npm install hls.js`.
2. Обновлен компонент `src/components/player/VideoPlayer.tsx` для прямого импорта библиотеки.
3. Добавлена инициализация `window.Hls = Hls`, что обеспечивает совместимость с ядром плеера (`player-core.js`).

### ⚠️ Проблема с SSL (Диагностика)
**Проблема:** `net::ERR_SSL_PROTOCOL_ERROR` для ресурса `https://ant-tv.ddns.net:2223/img/logos/257.jpg`.
**Анализ:**
* **Несоответствие протокола:** Сервер по адресу `ant-tv.ddns.net` на порту `2223` настроен для работы по протоколу **HTTP**, а не HTTPS.
* При попытке обратиться к нему через `https://` (как указано в ошибке), сервер отвечает некорректно для SSL-рукопожатия, вызывая ошибку протокола.
* Если ваше приложение работает через HTTPS (например, через Cloudflare Tunnel), браузер может блокировать прямые HTTP-запросы к картинкам (Mixed Content).

**Рекомендации:**
1. **Использовать Прокси (Рекомендуется):** 
   В проекте уже есть файл `public/proxy.php`, который поддерживает проксирование изображений.
   Вместо прямой ссылки: `http://ant-tv.ddns.net:2223/img/logos/257.jpg`
   Используйте: `/api/proxy.php?url=http://ant-tv.ddns.net:2223/img/logos/257.jpg`
   Это решит проблему Mixed Content и SSL ошибок.

2. **Настройка сервера (Альтернатива):** 
   Настроить SSL-сертификат на сервере `ant-tv.ddns.net` для порта 2223 (требует доступа к серверу).

## 2. Техническая информация

### Конфигурация сети
* **Frontend Proxy:** Настроен в `vite.config.ts`. Запросы `/api` перенаправляются на `http://localhost:8001`.
* **Video Proxy:** `player-core.js` автоматически использует `/api/proxy.php` для HLS-потоков, если они находятся на удаленном сервере.

### Версии библиотек
* **hls.js:** Установлена последняя версия через npm (вместо CDN).
* **React:** v18.3.1
* **Vite:** v5.4.19

### Логи
* Логи удаленного сервера (`ant-tv.ddns.net`) недоступны для проверки с текущего окружения.
* Ошибки клиента (браузера) указывают на `ERR_SSL_PROTOCOL_ERROR`, что подтверждает попытку SSL-соединения с HTTP-портом.
